<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—´ê¸°ê´€ ì—´íš¨ìœ¨ ì‹œë®¬ë ˆì´ì…˜</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            max-width: 500px;
            width: 100%;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 30px;
        }
        
        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 10px;
            font-size: 24px;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 25px;
            font-size: 14px;
        }
        
        .problem-box {
            background: #f8f9ff;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            line-height: 1.8;
        }
        
        .problem-box strong {
            color: #667eea;
            font-size: 18px;
        }
        
        .highlight {
            color: #e74c3c;
            font-weight: bold;
            font-size: 20px;
        }
        
        .diagram {
            background: #e8e8e8;
            border-radius: 12px;
            padding: 40px 20px;
            margin: 20px 0;
            position: relative;
        }
        
        .energy-system {
            position: relative;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .heat-source {
            width: 35%;
            height: 180px;
            background: linear-gradient(to right, #5d9cec 0%, #7db5f5 100%);
            border-radius: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #333;
            font-weight: bold;
            position: relative;
        }
        
        .heat-source-title {
            font-size: 15px;
            margin-bottom: 8px;
        }
        
        .heat-source-value {
            font-size: 20px;
        }
        
        .engine {
            width: 110px;
            height: 110px;
            background: radial-gradient(circle at 35% 35%, rgba(255,255,255,0.95), rgba(200,200,255,0.6));
            border: 4px solid #7d8fc7;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 16px;
            color: #333;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 10;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }
        
        .heat-waste {
            width: 35%;
            height: 100px;
            background: linear-gradient(to bottom, #ff9999 0%, #ffb3b3 100%);
            border-radius: 0 80px 80px 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #333;
            font-weight: bold;
            position: absolute;
            right: 0;
            top: 15px;
        }
        
        .heat-waste-title {
            font-size: 13px;
            margin-bottom: 5px;
        }
        
        .heat-waste-value {
            font-size: 18px;
        }
        
        .work-output {
            width: 25%;
            height: 70px;
            background: linear-gradient(to right, #90ee90 0%, #98fb98 100%);
            border-radius: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #333;
            font-weight: bold;
            position: absolute;
            right: 0;
            bottom: 20px;
        }
        
        .work-output::before {
            content: '';
            position: absolute;
            left: -15px;
            top: 50%;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-top: 15px solid transparent;
            border-bottom: 15px solid transparent;
            border-right: 15px solid #90ee90;
        }
        
        .work-title {
            font-size: 15px;
            margin-bottom: 3px;
        }
        
        .arrow {
            position: absolute;
            font-size: 35px;
            color: #333;
            z-index: 5;
        }
        
        .arrow-left {
            left: 33%;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .arrow-right-top {
            right: 33%;
            top: 25%;
        }
        
        .arrow-right-bottom {
            right: 24%;
            bottom: 30%;
        }
        
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-overlay.show {
            display: flex;
            animation: fadeIn 0.3s ease-out;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 40px 30px;
            max-width: 350px;
            width: 90%;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s ease-out;
        }
        
        .modal-content.incorrect-modal {
            max-width: 380px;
        }
        
        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .modal-icon {
            font-size: 60px;
            margin-bottom: 20px;
        }
        
        .modal-title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .modal-title.correct {
            color: #28a745;
        }
        
        .modal-title.incorrect {
            color: #dc3545;
        }
        
        .modal-message {
            font-size: 18px;
            color: #666;
            margin-bottom: 25px;
            line-height: 1.6;
        }
        
        .modal-btn {
            width: 100%;
            padding: 15px;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-bottom: 10px;
        }
        
        .modal-btn:last-child {
            margin-bottom: 0;
        }
        
        .modal-btn.correct {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            box-shadow: 0 4px 15px rgba(17, 153, 142, 0.4);
        }
        
        .modal-btn.correct:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(17, 153, 142, 0.6);
        }
        
        .modal-btn.incorrect {
            background: linear-gradient(135deg, #ee0979 0%, #ff6a00 100%);
            box-shadow: 0 4px 15px rgba(238, 9, 121, 0.4);
        }
        
        .modal-btn.incorrect:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(238, 9, 121, 0.6);
        }
        
        .modal-btn.retry {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        .modal-btn.retry:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }
        
        .modal-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .modal-btn:active {
            transform: translateY(0);
        }
        
        .answer-section {
            margin-top: 25px;
        }
        
        .choices-container {
            margin-bottom: 20px;
        }
        
        .choice-item {
            background: #f8f9ff;
            border: 2px solid #ddd;
            border-radius: 12px;
            padding: 15px 20px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            font-size: 18px;
            font-weight: bold;
        }
        
        .choice-item:hover {
            border-color: #667eea;
            background: #f0f3ff;
            transform: translateX(5px);
        }
        
        .choice-item.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .choice-item.correct {
            border-color: #28a745;
            background: #d4edda;
            color: #155724;
        }
        
        .choice-item.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
            color: #721c24;
        }
        
        .choice-number {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: rgba(102, 126, 234, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 16px;
        }
        
        .choice-item.selected .choice-number {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .choice-item.correct .choice-number {
            background: rgba(40, 167, 69, 0.3);
        }
        
        .choice-item.incorrect .choice-number {
            background: rgba(220, 53, 69, 0.3);
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .btn {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .btn:hover {
            transform: translateY(-2px);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-check {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(17, 153, 142, 0.4);
        }
        
        .btn-check:hover:not(:disabled) {
            box-shadow: 0 6px 20px rgba(17, 153, 142, 0.6);
        }
        
        .btn-hint {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(240, 147, 251, 0.4);
        }
        
        .btn-hint:hover {
            box-shadow: 0 6px 20px rgba(240, 147, 251, 0.6);
        }
        
        .btn-new {
            width: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-new:hover {
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }
        
        .hint-box {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            display: none;
        }
        
        .hint-box.show {
            display: block;
            animation: slideDown 0.3s ease-out;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .hint-title {
            color: #856404;
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 16px;
        }
        
        .hint-content {
            background: white;
            padding: 15px;
            border-radius: 8px;
            line-height: 1.8;
            color: #333;
        }
        
        .result-box {
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            display: none;
        }
        
        .result-box.show {
            display: block;
            animation: slideDown 0.3s ease-out;
        }
        
        .result-box.correct {
            background: #d4edda;
            border: 2px solid #28a745;
            color: #155724;
        }
        
        .result-box.incorrect {
            background: #f8d7da;
            border: 2px solid #dc3545;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”¥ ì—´ê¸°ê´€ ì—´íš¨ìœ¨ ì‹œë®¬ë ˆì´ì…˜</h1>
        <div class="subtitle">2022 ê°œì • êµìœ¡ê³¼ì • - í†µí•©ê³¼í•™2</div>
        
        <div class="problem-box">
            <strong>15. ë¬¸ì œ</strong><br>
            ê·¸ë¦¼ì€ í™”ì„ ì—°ë£Œê°€ ì—°ì†Œí•  ë•Œ ë°œìƒí•˜ëŠ” ì—´ì—ë„ˆì§€ë¥¼ ì´ìš©í•˜ì—¬ ë™ë ¥ì„ ì–»ëŠ” ì¥ì¹˜ì¸ ì—´ê¸°ê´€ì„ ë‚˜íƒ€ë‚¸ ê²ƒì´ë‹¤. ì´ ì—´ê¸°ê´€ì€ ê³ ì—´ì›ìœ¼ë¡œë¶€í„° <span class="highlight" id="heat-in">600</span> kJì˜ ì—´ì—ë„ˆì§€ë¥¼ ê³µê¸‰ ë°›ì•„ ì™¸ë¶€ì— <span class="highlight" id="work-out">W</span>ì˜ ì¼ì„ í•˜ê³  ì €ì—´ì›ìœ¼ë¡œ <span class="highlight" id="heat-out">480</span> kJì˜ ì—´ì—ë„ˆì§€ë¥¼ ë°©ì¶œí•œë‹¤. ì´ ì—´ê¸°ê´€ì˜ ì—´íš¨ìœ¨ì´ ëª‡ %ì¸ì§€ ê³„ì‚° ê³¼ì •ê³¼ í•¨ê»˜ êµ¬í•˜ì‹œì˜¤.
        </div>
        
        <div class="diagram">
            <div class="energy-system">
                <div class="heat-source">
                    <div class="heat-source-title">ê³µê¸‰í•œ ì—´</div>
                    <div class="heat-source-value">(<span id="heat-in-display">600</span> kJ)</div>
                </div>
                
                <div class="engine">ì—´ê¸°ê´€</div>
                
                <div class="arrow arrow-left">â†’</div>
                
                <div class="heat-waste">
                    <div class="heat-waste-title">ë²„ë ¤ì§€ëŠ” ì—´</div>
                    <div class="heat-waste-value">(<span id="heat-out-display">480</span> kJ)</div>
                </div>
                
                <div class="work-output">
                    <div class="work-title">ì¼(W)</div>
                </div>
                
                <div class="arrow arrow-right-top">â†’</div>
                <div class="arrow arrow-right-bottom">â†’</div>
            </div>
        </div>
        
        <div class="modal-overlay" id="modal-overlay">
            <div class="modal-content" id="modal-content">
                <div class="modal-icon" id="modal-icon">ğŸ‰</div>
                <div class="modal-title" id="modal-title">ì •ë‹µì…ë‹ˆë‹¤!</div>
                <div class="modal-message" id="modal-message">
                    ì—´íš¨ìœ¨: <strong id="modal-answer">20</strong>%<br>
                    í›Œë¥­í•©ë‹ˆë‹¤!
                </div>
                <div class="modal-buttons" id="modal-buttons">
                    <button class="modal-btn" id="modal-btn" onclick="closeModal()">í™•ì¸</button>
                </div>
            </div>
        </div>
        
        <div class="answer-section">
            <div class="choices-container" id="choices-container">
                <!-- ì„ íƒì§€ëŠ” JavaScriptë¡œ ìƒì„±ë¨ -->
            </div>
            
            <div class="button-group">
                <button class="btn btn-check" id="check-btn" onclick="checkAnswer()">âœ“ ì •ë‹µ í™•ì¸</button>
                <button class="btn btn-hint" onclick="toggleHint()">ğŸ’¡ íŒíŠ¸</button>
            </div>
            
            <div class="hint-box" id="hint-box">
                <div class="hint-title">ğŸ’¡ í’€ì´ íŒíŠ¸</div>
                <div class="hint-content">
                    <strong>1ë‹¨ê³„:</strong> ì—´ê¸°ê´€ì´ í•œ ì¼(W) êµ¬í•˜ê¸°<br>
                    W = ê³µê¸‰í•œ ì—´ - ë²„ë ¤ì§€ëŠ” ì—´<br><br>
                    
                    <strong>2ë‹¨ê³„:</strong> ì—´íš¨ìœ¨ ê³„ì‚°í•˜ê¸°<br>
                    ì—´íš¨ìœ¨(%) = (í•œ ì¼ Ã· ê³µê¸‰í•œ ì—´) Ã— 100<br><br>
                    
                    <strong>ğŸ’¡ ê³µì‹:</strong><br>
                    ì—´íš¨ìœ¨ = (W Ã· Q<sub>H</sub>) Ã— 100
                </div>
            </div>
            
            <div class="result-box" id="result-box">
                <span id="result-message"></span>
            </div>
            
            <button class="btn btn-new" onclick="generateNewProblem()">ğŸ”„ ìƒˆ ë¬¸ì œ</button>
        </div>
    </div>
    
    <script>
        let currentAnswer = 20;
        let selectedChoice = null;
        let isAnswered = false;
        let canUseHint = false;
        let wrongAttempts = 0;
        
        function generateNewProblem() {
            // ì •ë‹µì´ ì •ìˆ˜ê°€ ë˜ë„ë¡ ë¬¸ì œ ìƒì„±
            const efficiencies = [10, 15, 20, 25, 30, 35, 40, 50, 60, 75, 80];
            const efficiency = efficiencies[Math.floor(Math.random() * efficiencies.length)];
            
            // ê³µê¸‰í•œ ì—´: 100ì˜ ë°°ìˆ˜
            let heatIn;
            if (efficiency === 10 || efficiency === 20 || efficiency === 25 || efficiency === 50) {
                heatIn = (Math.floor(Math.random() * 6) + 4) * 100;
            } else if (efficiency === 15) {
                heatIn = [400, 600, 800][Math.floor(Math.random() * 3)];
            } else if (efficiency === 30) {
                heatIn = [500, 600, 700, 800, 900, 1000][Math.floor(Math.random() * 6)];
            } else if (efficiency === 35) {
                heatIn = [400, 600, 800][Math.floor(Math.random() * 3)];
            } else if (efficiency === 40) {
                heatIn = (Math.floor(Math.random() * 6) + 4) * 100;
            } else if (efficiency === 60) {
                heatIn = (Math.floor(Math.random() * 6) + 4) * 100;
            } else if (efficiency === 75) {
                heatIn = (Math.floor(Math.random() * 5) + 4) * 100;
            } else {
                heatIn = (Math.floor(Math.random() * 6) + 4) * 100;
            }
            
            // í•œ ì¼ ê³„ì‚°
            const work = heatIn * efficiency / 100;
            
            // ë²„ë ¤ì§€ëŠ” ì—´ ê³„ì‚°
            const heatOut = heatIn - work;
            
            // ì‹¤ì œ ì—´íš¨ìœ¨
            currentAnswer = efficiency;
            
            // í™”ë©´ ì—…ë°ì´íŠ¸
            document.getElementById('heat-in').textContent = heatIn;
            document.getElementById('heat-out').textContent = heatOut;
            document.getElementById('heat-in-display').textContent = heatIn;
            document.getElementById('heat-out-display').textContent = heatOut;
            
            // ì„ íƒì§€ ìƒì„±
            generateChoices(efficiency);
            
            // ìƒíƒœ ì´ˆê¸°í™”
            selectedChoice = null;
            isAnswered = false;
            canUseHint = false;
            wrongAttempts = 0;
            document.getElementById('check-btn').disabled = false;
            document.getElementById('hint-box').classList.remove('show');
            document.getElementById('result-box').classList.remove('show', 'correct', 'incorrect');
            
            // íŒíŠ¸ ë²„íŠ¼ ë¹„í™œì„±í™”
            updateHintButton();
        }
        
        function generateChoices(correctAnswer) {
            const choices = new Set();
            choices.add(correctAnswer);
            
            // ì˜¤ë‹µ ìƒì„± (ì •ë‹µ Â±10, Â±15, Â±20 ë²”ìœ„ì—ì„œ)
            const possibleWrong = [5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90];
            const wrongChoices = possibleWrong.filter(v => v !== correctAnswer && v > 0 && v <= 95);
            
            // ëœë¤í•˜ê²Œ ì„ê¸°
            for (let i = wrongChoices.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [wrongChoices[i], wrongChoices[j]] = [wrongChoices[j], wrongChoices[i]];
            }
            
            while (choices.size < 5 && wrongChoices.length > 0) {
                choices.add(wrongChoices.shift());
            }
            
            // ë°°ì—´ë¡œ ë³€í™˜í•˜ê³  ì™„ì „íˆ ëœë¤í•˜ê²Œ ì„ê¸° (Fisher-Yates ì•Œê³ ë¦¬ì¦˜)
            const choicesArray = Array.from(choices);
            for (let i = choicesArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [choicesArray[i], choicesArray[j]] = [choicesArray[j], choicesArray[i]];
            }
            
            // ì„ íƒì§€ HTML ìƒì„±
            const container = document.getElementById('choices-container');
            container.innerHTML = '';
            
            choicesArray.forEach((choice, index) => {
                const choiceDiv = document.createElement('div');
                choiceDiv.className = 'choice-item';
                choiceDiv.dataset.value = choice;
                choiceDiv.innerHTML = `
                    <span class="choice-number">${index + 1}</span>
                    <span>${choice}%</span>
                `;
                choiceDiv.onclick = () => selectChoice(choiceDiv, choice);
                container.appendChild(choiceDiv);
            });
        }
        
        function selectChoice(element, value) {
            if (isAnswered) return;
            
            // ì´ì „ ì„ íƒ í•´ì œ
            document.querySelectorAll('.choice-item').forEach(item => {
                item.classList.remove('selected');
            });
            
            // ìƒˆë¡œìš´ ì„ íƒ
            element.classList.add('selected');
            selectedChoice = value;
        }
        
        function toggleHint() {
            if (!canUseHint) {
                return;
            }
            const hintBox = document.getElementById('hint-box');
            hintBox.classList.toggle('show');
        }
        
        function updateHintButton() {
            const hintBtn = document.querySelector('.btn-hint');
            if (canUseHint) {
                hintBtn.style.opacity = '1';
                hintBtn.style.cursor = 'pointer';
                hintBtn.disabled = false;
            } else {
                hintBtn.style.opacity = '0.5';
                hintBtn.style.cursor = 'not-allowed';
                hintBtn.disabled = true;
            }
        }
        
        function retryProblem() {
            // ëª¨ë‹¬ ë‹«ê¸°
            closeModal();
            
            // ì„ íƒì§€ ì´ˆê¸°í™”
            document.querySelectorAll('.choice-item').forEach(item => {
                item.classList.remove('selected', 'correct', 'incorrect');
                item.style.cursor = 'pointer';
                const value = parseInt(item.dataset.value);
                item.onclick = () => selectChoice(item, value);
            });
            
            // ìƒíƒœ ì´ˆê¸°í™”
            selectedChoice = null;
            isAnswered = false;
            canUseHint = true;
            document.getElementById('check-btn').disabled = false;
            document.getElementById('result-box').classList.remove('show', 'correct', 'incorrect');
            
            // íŒíŠ¸ ë²„íŠ¼ í™œì„±í™”
            updateHintButton();
        }
        
        function checkAnswer() {
            if (selectedChoice === null) {
                const resultBox = document.getElementById('result-box');
                const resultMessage = document.getElementById('result-message');
                resultBox.className = 'result-box show incorrect';
                resultMessage.textContent = 'âš ï¸ ë‹µì„ ì„ íƒí•´ì£¼ì„¸ìš”!';
                return;
            }
            
            if (isAnswered) return;
            
            isAnswered = true;
            document.getElementById('check-btn').disabled = true;
            
            const resultBox = document.getElementById('result-box');
            const resultMessage = document.getElementById('result-message');
            
            // ëª¨ë“  ì„ íƒì§€ì— ì •ë‹µ/ì˜¤ë‹µ í‘œì‹œ
            document.querySelectorAll('.choice-item').forEach(item => {
                const value = parseInt(item.dataset.value);
                if (selectedChoice === currentAnswer) {
                    // ì •ë‹µì„ ë§ì¶˜ ê²½ìš°ì—ë§Œ ì •ë‹µ í‘œì‹œ
                    if (value === currentAnswer) {
                        item.classList.add('correct');
                    }
                } else {
                    // ì˜¤ë‹µì„ ì„ íƒí•œ ê²½ìš° ì„ íƒí•œ ê²ƒë§Œ ë¹¨ê°„ìƒ‰ í‘œì‹œ
                    if (value === selectedChoice) {
                        item.classList.add('incorrect');
                    }
                }
                item.style.cursor = 'default';
                item.onclick = null;
            });
            
            // ê²°ê³¼ í‘œì‹œ
            if (selectedChoice === currentAnswer) {
                // ì •ë‹µ ëª¨ë‹¬ í‘œì‹œ
                const modalContent = document.getElementById('modal-content');
                const modalIcon = document.getElementById('modal-icon');
                const modalTitle = document.getElementById('modal-title');
                const modalMessage = document.getElementById('modal-message');
                const modalButtons = document.getElementById('modal-buttons');
                
                modalContent.className = 'modal-content';
                modalIcon.textContent = 'ğŸ‰';
                modalTitle.textContent = 'ì •ë‹µì…ë‹ˆë‹¤!';
                modalTitle.className = 'modal-title correct';
                modalMessage.innerHTML = `ì—´íš¨ìœ¨: <strong>${currentAnswer}</strong>%<br>í›Œë¥­í•©ë‹ˆë‹¤!`;
                modalButtons.innerHTML = `<button class="modal-btn correct" onclick="closeModal()">í™•ì¸</button>`;
                
                document.getElementById('modal-overlay').classList.add('show');
                
                resultBox.className = 'result-box show correct';
                resultMessage.innerHTML = `ğŸ‰ ì •ë‹µì…ë‹ˆë‹¤!<br>ì—´íš¨ìœ¨: ${currentAnswer}%`;
            } else {
                // ì˜¤ë‹µ ëª¨ë‹¬ í‘œì‹œ
                wrongAttempts++;
                
                const modalContent = document.getElementById('modal-content');
                const modalIcon = document.getElementById('modal-icon');
                const modalTitle = document.getElementById('modal-title');
                const modalMessage = document.getElementById('modal-message');
                const modalButtons = document.getElementById('modal-buttons');
                
                if (wrongAttempts >= 3) {
                    // 3ë²ˆ í‹€ë¦° ê²½ìš° - ì •ë‹µ ê³µê°œ
                    modalContent.className = 'modal-content incorrect-modal';
                    modalIcon.textContent = 'ğŸ“–';
                    modalTitle.textContent = 'ì •ë‹µ ê³µê°œ';
                    modalTitle.className = 'modal-title incorrect';
                    modalMessage.innerHTML = `3ë²ˆ ì‹œë„í•˜ì…¨ìŠµë‹ˆë‹¤.<br>ì •ë‹µ: <strong>${currentAnswer}</strong>%`;
                    modalButtons.innerHTML = `
                        <button class="modal-btn incorrect" onclick="closeModal()">í™•ì¸</button>
                    `;
                    
                    // ì„ íƒì§€ì— ì •ë‹µ í‘œì‹œ
                    document.querySelectorAll('.choice-item').forEach(item => {
                        const value = parseInt(item.dataset.value);
                        if (value === currentAnswer) {
                            item.classList.remove('incorrect');
                            item.classList.add('correct');
                        }
                    });
                    
                    resultBox.className = 'result-box show incorrect';
                    resultMessage.innerHTML = `ì •ë‹µ: ${currentAnswer}%<br>ìƒˆ ë¬¸ì œì— ë„ì „í•´ë³´ì„¸ìš”!`;
                } else {
                    // ì•„ì§ ê¸°íšŒê°€ ë‚¨ì€ ê²½ìš°
                    modalContent.className = 'modal-content incorrect-modal';
                    modalIcon.textContent = 'ğŸ˜¢';
                    modalTitle.textContent = 'í‹€ë ¸ìŠµë‹ˆë‹¤!';
                    modalTitle.className = 'modal-title incorrect';
                    modalMessage.innerHTML = `ë‚¨ì€ ê¸°íšŒ: <strong>${3 - wrongAttempts}</strong>ë²ˆ<br>ë‹¤ì‹œ í•œë²ˆ ë„ì „í•´ë³´ì„¸ìš”!`;
                    modalButtons.innerHTML = `
                        <button class="modal-btn retry" onclick="retryProblem()">ğŸ”„ ë‹¤ì‹œ í’€ê¸°</button>
                        <button class="modal-btn incorrect" onclick="closeModal()">í™•ì¸</button>
                    `;
                    
                    resultBox.className = 'result-box show incorrect';
                    resultMessage.innerHTML = `âŒ í‹€ë ¸ìŠµë‹ˆë‹¤! (${wrongAttempts}/3)<br>ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”!`;
                }
                
                document.getElementById('modal-overlay').classList.add('show');
            }
        }
        
        function closeModal() {
            document.getElementById('modal-overlay').classList.remove('show');
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸° ë¬¸ì œ ì„¤ì •
        window.onload = function() {
            generateNewProblem();
            updateHintButton();
        };
    </script>
</body>
</html>