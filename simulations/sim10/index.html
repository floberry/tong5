<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—ë„ˆì§€ íš¨ìœ¨ ì‹œë®¬ë ˆì´ì…˜</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }
        
        .container {
            background: white;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border: 1px solid #ddd;
        }
        
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            text-align: center;
            border-bottom: 3px solid #000;
        }

        .header h1 {
            font-size: 22px;
            margin-bottom: 5px;
        }

        .header .subtitle {
            font-size: 13px;
            color: #bdc3c7;
        }

        .problem-selector {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 0;
            border-bottom: 2px solid #000;
        }

        .problem-btn {
            padding: 12px;
            font-size: 14px;
            font-weight: bold;
            border: none;
            border-right: 1px solid #ddd;
            border-bottom: 1px solid #ddd;
            background: #f8f9fa;
            color: #495057;
            cursor: pointer;
            transition: all 0.2s;
        }

        .problem-btn:hover {
            background: #e9ecef;
        }

        .problem-btn.active {
            background: #2c3e50;
            color: white;
            border-bottom: 3px solid #000;
        }

        .problem-btn:nth-child(5n) {
            border-right: none;
        }
        
        .content {
            padding: 25px;
        }

        .problem-number {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #000;
            padding-bottom: 10px;
            border-bottom: 2px solid #000;
        }

        .problem-text {
            font-size: 15px;
            line-height: 1.8;
            color: #212529;
            margin-bottom: 20px;
        }
        
        .energy-display {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border: 1px solid #dee2e6;
        }
        
        .energy-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin: 8px 0;
            background: white;
            border-radius: 3px;
            font-size: 14px;
            border: 1px solid #dee2e6;
        }
        
        .energy-label {
            font-weight: bold;
            color: #000;
        }
        
        .energy-value {
            font-weight: bold;
            color: #495057;
            font-size: 16px;
        }
        
        .selection-area {
            margin: 20px 0;
        }
        
        .selection-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: #212529;
            font-size: 14px;
        }
        
        .button-group {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .option-btn {
            padding: 15px;
            font-size: 18px;
            font-weight: bold;
            border: 2px solid #495057;
            background: white;
            color: #495057;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .option-btn:hover {
            background: #f8f9fa;
        }
        
        .option-btn:active {
            transform: scale(0.95);
        }
        
        .option-btn.selected {
            background: #2c3e50;
            color: white;
            border-color: #000;
        }

        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .checkbox-item {
            padding: 15px;
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
            display: flex;
            align-items: flex-start;
            line-height: 1.6;
            user-select: none;
        }

        .checkbox-item:hover {
            background: #f8f9fa;
            border-color: #adb5bd;
        }

        .checkbox-item.selected {
            background: #2c3e50;
            color: white;
            border-color: #000;
        }

        .checkbox-icon {
            width: 20px;
            height: 20px;
            border: 2px solid #495057;
            border-radius: 3px;
            margin-right: 12px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            margin-top: 2px;
        }

        .checkbox-item.selected .checkbox-icon {
            background: white;
            border-color: white;
        }

        .checkbox-item.selected .checkbox-icon::after {
            content: 'âœ“';
            color: #2c3e50;
            font-weight: bold;
            font-size: 14px;
        }

        .input-area {
            display: flex;
            gap: 10px;
            align-items: center;
            margin: 15px 0;
        }

        .input-field {
            flex: 1;
            padding: 12px;
            font-size: 16px;
            border: 2px solid #495057;
            border-radius: 5px;
            text-align: center;
        }

        .input-field:focus {
            outline: none;
            border-color: #000;
        }

        .unit {
            font-weight: bold;
            color: #495057;
        }
        
        .answer-display {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            text-align: center;
            font-size: 16px;
            font-weight: bold;
            color: #495057;
            border: 2px solid #dee2e6;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .control-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #dee2e6;
        }
        
        .btn {
            padding: 15px;
            font-size: 16px;
            font-weight: bold;
            border: 2px solid;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-new {
            background: white;
            color: #495057;
            border-color: #495057;
        }
        
        .btn-new:hover {
            background: #495057;
            color: white;
        }
        
        .btn-new:active {
            transform: scale(0.98);
        }
        
        .btn-check {
            background: #2c3e50;
            color: white;
            border-color: #000;
        }
        
        .btn-check:hover {
            background: #1a252f;
        }
        
        .btn-check:active {
            transform: scale(0.98);
        }
        
        .result {
            margin-top: 15px;
            padding: 15px;
            border-radius: 5px;
            text-align: center;
            font-size: 15px;
            font-weight: bold;
            border: 2px solid;
        }
        
        .correct {
            background: #e8f5e9;
            color: #2e7d32;
            border-color: #4caf50;
        }
        
        .incorrect {
            background: #ffebee;
            color: #c62828;
            border-color: #f44336;
        }

        .diagram {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
        }

        .heat-engine {
            width: 100%;
            max-width: 250px;
            margin: 0 auto;
        }

        .flow-box {
            background: white;
            padding: 12px;
            margin: 8px 0;
            border-radius: 3px;
            font-size: 14px;
            border: 1px solid #dee2e6;
        }

        .arrow {
            font-size: 24px;
            color: #495057;
            margin: 5px 0;
        }

        .engine-box {
            background: #2c3e50;
            color: white;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>âš¡ ì—ë„ˆì§€ íš¨ìœ¨ í‰ê°€</h1>
            <div class="subtitle">í†µí•©ê³¼í•™2 - ì—ë„ˆì§€ ì „í™˜ê³¼ ì—´íš¨ìœ¨</div>
        </div>
        
        <div class="problem-selector" id="problemSelector"></div>

        <div class="content">
            <div class="problem-number" id="problemNumber"></div>
            <div id="problemContent"></div>
            
            <div class="control-buttons">
                <button class="btn btn-new" onclick="generateNewProblem()">ğŸ”„ ìƒˆ ë¬¸ì œ</button>
                <button class="btn btn-check" onclick="checkAnswer()">âœ“ ì •ë‹µ í™•ì¸</button>
            </div>
            
            <div id="result"></div>
        </div>
    </div>

    <script>
        let currentProblem = 1;
        let selectedOrder = [];
        let selectedItems = [];
        let userAnswer = '';
        let correctAnswer = null;
        let problemData = {};

        const problems = [
            {
                id: 1,
                type: 'checkbox',
                question: 'ë‹¤ìŒ ì¤‘ ì—ë„ˆì§€ ì „í™˜ì´ ì¼ì–´ë‚˜ëŠ” ê²½ìš°ë¥¼ ëª¨ë‘ ê³ ë¥´ì‹œì˜¤.',
                options: [
                    { text: 'í™”í•™ ì—ë„ˆì§€ â†’ ìš´ë™ ì—ë„ˆì§€ (í•™ìƒì´ ìš´ë™í•  ë•Œ)', key: 'A' },
                    { text: 'í™”í•™ ì—ë„ˆì§€ â†’ ì—´ ì—ë„ˆì§€ (ìŒì‹ì„ ì¡°ë¦¬í•  ë•Œ)', key: 'B' },
                    { text: 'ì „ê¸° ì—ë„ˆì§€ â†’ ì†Œë¦¬ ì—ë„ˆì§€ (ìŠ¤í”¼ì»¤ ì‘ë™)', key: 'C' },
                    { text: 'ì—ë„ˆì§€ëŠ” ì „í™˜ë˜ì§€ ì•ŠëŠ”ë‹¤', key: 'D' }
                ],
                correctKeys: ['A', 'B', 'C']
            },
            {
                id: 2,
                type: 'checkbox',
                question: 'ì—´íš¨ìœ¨ì— ëŒ€í•œ ì„¤ëª…ìœ¼ë¡œ ì˜³ì€ ê²ƒì„ ëª¨ë‘ ê³ ë¥´ì‹œì˜¤.',
                options: [
                    { text: 'ì—´íš¨ìœ¨ = (í•œ ì¼ / ê³µê¸‰ëœ ì—´) Ã— 100%', key: 'A' },
                    { text: 'ì—´ê¸°ê´€ì€ ì—´ì—ë„ˆì§€ë¥¼ ì¼ë¡œ ë°”ê¾¸ëŠ” ì¥ì¹˜ì´ë‹¤', key: 'B' },
                    { text: 'ë‚˜ë¬´ë¥¼ íƒœì›Œ ì¬ê°€ ë˜ë©´ ì—ë„ˆì§€ê°€ ì‚¬ë¼ì§„ë‹¤', key: 'C' },
                    { text: 'ì—´íš¨ìœ¨ì€ í•­ìƒ 100%ì´ë‹¤', key: 'D' }
                ],
                correctKeys: ['A', 'B']
            },
            {
                id: 3,
                type: 'calculate',
                question: 'ì—´ê¸°ê´€ì— ê³µê¸‰ëœ ì—´ì—ë„ˆì§€ê°€ Qâ‚ì´ê³ , ì™¸ë¶€ì— í•œ ì¼ì´ Wì¼ ë•Œ, ë°œìƒí•œ ì—´ Qâ‚‚ëŠ” ì–¼ë§ˆì¸ê°€?',
                unit: 'kJ',
                calculate: (data) => data.Q1 - data.W
            },
            {
                id: 4,
                type: 'calculate',
                question: 'ì—´ê¸°ê´€ì˜ ì—´íš¨ìœ¨ì„ êµ¬í•˜ì‹œì˜¤. (ì†Œìˆ˜ì  ì²«ì§¸ìë¦¬ê¹Œì§€)',
                unit: '%',
                calculate: (data) => Math.round((data.W / data.Q1) * 1000) / 10
            },
            {
                id: 5,
                type: 'checkbox',
                question: 'ìë™ì°¨ ì—”ì§„ì—ì„œ ê³µê¸‰ëœ ì—°ë£Œ ì—ë„ˆì§€ 100J ì¤‘ ìš´ë™ ì—ë„ˆì§€ë¡œ ì „í™˜ëœ ê²ƒì´ 24Jì¼ ë•Œ, ë‹¤ìŒ ì¤‘ ì˜³ì€ ì„¤ëª…ì„ ëª¨ë‘ ê³ ë¥´ì‹œì˜¤.',
                options: [
                    { text: 'ìë™ì°¨ì˜ ì—´íš¨ìœ¨ì€ 24%ì´ë‹¤', key: 'A' },
                    { text: 'ì†ì‹¤ëœ ì—ë„ˆì§€ê°€ ìš´ë™ ì—ë„ˆì§€ë³´ë‹¤ ë§ë‹¤', key: 'B' },
                    { text: 'ê³µê¸‰ëœ ì—ë„ˆì§€ì™€ ì „í™˜ëœ ì—ë„ˆì§€ì˜ í•©ì€ ê°™ë‹¤', key: 'C' },
                    { text: 'ì—ë„ˆì§€ ë³´ì¡´ ë²•ì¹™ì´ ì„±ë¦½í•œë‹¤', key: 'D' }
                ],
                correctKeys: ['A', 'B', 'D']
            },
            {
                id: 6,
                type: 'order',
                question: 'ë‹¤ìŒ ì—´ê¸°ê´€ì˜ ì—´íš¨ìœ¨ì´ ë†’ì€ ìˆœì„œëŒ€ë¡œ ë°°ì—´í•˜ì‹œì˜¤.',
                items: ['A', 'B', 'C']
            },
            {
                id: 7,
                type: 'checkbox',
                question: 'ì—ë„ˆì§€ ì „í™˜ê³¼ ë³´ì¡´ì— ëŒ€í•œ ì„¤ëª…ìœ¼ë¡œ ì˜³ì€ ê²ƒì„ ëª¨ë‘ ê³ ë¥´ì‹œì˜¤.',
                options: [
                    { text: 'ì—ë„ˆì§€ëŠ” ë‹¤ë¥¸ í˜•íƒœë¡œ ì „í™˜ë  ìˆ˜ ìˆë‹¤', key: 'A' },
                    { text: 'ì—ë„ˆì§€ ì „í™˜ ì‹œ ì´ëŸ‰ì€ ë³´ì¡´ëœë‹¤', key: 'B' },
                    { text: 'ì—´ì—ë„ˆì§€ëŠ” 100% ì¼ë¡œ ì „í™˜ ê°€ëŠ¥í•˜ë‹¤', key: 'C' },
                    { text: 'ì—´íš¨ìœ¨ì´ ë†’ì„ìˆ˜ë¡ ì—ë„ˆì§€ ì†ì‹¤ì´ ì ë‹¤', key: 'D' }
                ],
                correctKeys: ['A', 'B', 'D']
            },
            {
                id: 8,
                type: 'calculate',
                question: 'í™”ë ¥ë°œì „ì†Œì—ì„œ ì—°ë£Œê°€ ì—°ì†Œí•˜ì—¬ ë°œìƒí•œ ì—´ì—ë„ˆì§€ê°€ Qâ‚ì´ê³ , ë°œì „ê¸°ì—ì„œ ì†ì‹¤ëœ ì—´ì´ Qâ‚‚ì¼ ë•Œ, ì „ê¸° ì—ë„ˆì§€ë¡œ ì „í™˜ëœ ì¼ WëŠ”?',
                unit: 'kJ',
                calculate: (data) => data.Q1 - data.Q2
            },
            {
                id: 9,
                type: 'order',
                question: 'ë‹¤ìŒ ì—ë„ˆì§€ ì „í™˜ íš¨ìœ¨ì´ ë†’ì€ ìˆœì„œëŒ€ë¡œ ë°°ì—´í•˜ì‹œì˜¤. (íš¨ìœ¨ = ì¶œë ¥/ì…ë ¥ Ã— 100%)',
                items: ['A', 'B', 'C']
            },
            {
                id: 10,
                type: 'checkbox',
                question: 'ì—´ê¸°ê´€ì˜ íš¨ìœ¨ì„ ë†’ì´ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œ ì˜³ì€ ê²ƒì„ ëª¨ë‘ ê³ ë¥´ì‹œì˜¤.',
                options: [
                    { text: 'ì—´ ì†ì‹¤ì„ ìµœì†Œí™”í•œë‹¤', key: 'A' },
                    { text: 'ë§ˆì°°ì„ ì¤„ì—¬ ì†ì‹¤ ì—ë„ˆì§€ë¥¼ ê°ì†Œì‹œí‚¨ë‹¤', key: 'B' },
                    { text: 'ê³µê¸‰ ì—ë„ˆì§€ë¥¼ ì¤„ì¸ë‹¤', key: 'C' },
                    { text: 'ë‹¨ì—´ì„ ê°•í™”í•˜ì—¬ ì—´ ì†ì‹¤ì„ ë°©ì§€í•œë‹¤', key: 'D' }
                ],
                correctKeys: ['A', 'B', 'D']
            }
        ];

        function init() {
            const selector = document.getElementById('problemSelector');
            for (let i = 1; i <= 10; i++) {
                const btn = document.createElement('button');
                btn.className = 'problem-btn';
                btn.textContent = i;
                btn.onclick = () => selectProblem(i);
                if (i === 1) btn.classList.add('active');
                selector.appendChild(btn);
            }
            selectProblem(1);
        }

        function selectProblem(num) {
            currentProblem = num;
            document.querySelectorAll('.problem-btn').forEach((btn, idx) => {
                btn.classList.toggle('active', idx + 1 === num);
            });
            generateNewProblem();
        }

        function generateRandomEnergy() {
            return (Math.floor(Math.random() * 10) + 1) * 10;
        }

        function generateNewProblem() {
            selectedOrder = [];
            selectedItems = [];
            userAnswer = '';
            document.getElementById('result').innerHTML = '';
            
            const problem = problems[currentProblem - 1];
            document.getElementById('problemNumber').textContent = `ë¬¸ì œ ${currentProblem}.`;
            
            const content = document.getElementById('problemContent');
            
            let html = `<div class="problem-text">${problem.question}</div>`;

            if (problem.type === 'checkbox') {
                html += '<div class="selection-area">';
                html += '<div class="checkbox-group" id="checkboxGroup">';
                problem.options.forEach((opt, idx) => {
                    html += `<div class="checkbox-item" data-key="${opt.key}" onclick="toggleCheckbox('${opt.key}')">
                        <div class="checkbox-icon"></div>
                        <span>${opt.text}</span>
                    </div>`;
                });
                html += '</div></div>';
            } else if (problem.type === 'order') {
                const energies = [];
                for (let i = 0; i < 3; i++) {
                    let supplied = generateRandomEnergy();
                    let work = generateRandomEnergy();
                    while (work >= supplied) {
                        work = generateRandomEnergy();
                    }
                    energies.push({
                        supplied: supplied,
                        work: work,
                        efficiency: (work / supplied)
                    });
                }

                problemData = { energies };

                html += '<div class="energy-display">';
                html += `<div class="energy-row"><span class="energy-label">A ì—´ê¸°ê´€</span><span>ê³µê¸‰: <span class="energy-value">${energies[0].supplied}</span> kJ / ì¼: <span class="energy-value">${energies[0].work}</span> kJ</span></div>`;
                html += `<div class="energy-row"><span class="energy-label">B ì—´ê¸°ê´€</span><span>ê³µê¸‰: <span class="energy-value">${energies[1].supplied}</span> kJ / ì¼: <span class="energy-value">${energies[1].work}</span> kJ</span></div>`;
                html += `<div class="energy-row"><span class="energy-label">C ì—´ê¸°ê´€</span><span>ê³µê¸‰: <span class="energy-value">${energies[2].supplied}</span> kJ / ì¼: <span class="energy-value">${energies[2].work}</span> kJ</span></div>`;
                html += '</div>';

                html += '<div class="selection-area">';
                html += '<div class="selection-title">â–¼ í´ë¦­í•˜ì—¬ ìˆœì„œëŒ€ë¡œ ì„ íƒí•˜ì„¸ìš”</div>';
                html += '<div class="button-group">';
                html += '<button class="option-btn" onclick="selectOption(\'A\', event)">A</button>';
                html += '<button class="option-btn" onclick="selectOption(\'B\', event)">B</button>';
                html += '<button class="option-btn" onclick="selectOption(\'C\', event)">C</button>';
                html += '</div>';
                html += '<div class="answer-display" id="answerDisplay">ì„ íƒí•œ ìˆœì„œê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</div>';
                html += '</div>';

                const machines = [
                    { name: 'A', efficiency: energies[0].efficiency },
                    { name: 'B', efficiency: energies[1].efficiency },
                    { name: 'C', efficiency: energies[2].efficiency }
                ];
                machines.sort((a, b) => b.efficiency - a.efficiency);
                correctAnswer = machines.map(m => m.name);
            } else if (problem.type === 'calculate') {
                let Q1 = generateRandomEnergy();
                let W = generateRandomEnergy();
                while (W >= Q1) {
                    W = generateRandomEnergy();
                }
                let Q2 = Q1 - W;

                problemData = { Q1, W, Q2 };
                correctAnswer = problem.calculate(problemData);

                html += '<div class="diagram">';
                html += '<div class="heat-engine">';
                html += `<div class="flow-box">ê³ ì˜¨ ì—´ì›<br>Qâ‚ = <strong>${Q1} kJ</strong></div>`;
                html += '<div class="arrow">â†“</div>';
                html += '<div class="flow-box engine-box">ì—´ê¸°ê´€</div>';
                html += '<div class="arrow">â†“</div>';
                if (currentProblem === 3 || currentProblem === 8) {
                    html += `<div class="flow-box">í•œ ì¼<br>W = <strong>${W} kJ</strong></div>`;
                } else {
                    html += `<div class="flow-box">ì €ì˜¨ ì—´ì›<br>Qâ‚‚ = <strong>${Q2} kJ</strong></div>`;
                    html += `<div style="font-size: 12px; margin-top: 10px; color: #495057;">í•œ ì¼: W = <strong>${W} kJ</strong></div>`;
                }
                html += '</div></div>';

                html += '<div class="selection-area">';
                html += '<div class="input-area">';
                html += `<input type="number" class="input-field" id="userInput" placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”" step="0.1">`;
                html += `<span class="unit">${problem.unit}</span>`;
                html += '</div></div>';
            }

            content.innerHTML = html;
        }

        function toggleCheckbox(key) {
            const item = document.querySelector(`.checkbox-item[data-key="${key}"]`);
            
            if (selectedItems.includes(key)) {
                selectedItems = selectedItems.filter(k => k !== key);
                item.classList.remove('selected');
            } else {
                selectedItems.push(key);
                item.classList.add('selected');
            }
        }

        function selectOption(option, event) {
            const btn = event.target;
            
            if (btn.classList.contains('selected')) {
                btn.classList.remove('selected');
                selectedOrder = selectedOrder.filter(o => o !== option);
            } else {
                if (selectedOrder.length < 3) {
                    selectedOrder.push(option);
                    btn.classList.add('selected');
                }
            }
            
            updateAnswerDisplay();
        }

        function updateAnswerDisplay() {
            const display = document.getElementById('answerDisplay');
            if (selectedOrder.length === 0) {
                display.textContent = 'ì„ íƒí•œ ìˆœì„œê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤';
            } else {
                display.textContent = selectedOrder.join(' > ');
            }
        }

        function checkAnswer() {
            const problem = problems[currentProblem - 1];
            const resultDiv = document.getElementById('result');
            let isCorrect = false;

            if (problem.type === 'checkbox') {
                if (selectedItems.length === 0) {
                    resultDiv.innerHTML = '<div class="result incorrect">ì„ íƒì§€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!</div>';
                    return;
                }
                const correct = problem.correctKeys.sort().join(',');
                const selected = selectedItems.sort().join(',');
                isCorrect = correct === selected;
                
                if (isCorrect) {
                    resultDiv.innerHTML = '<div class="result correct">âœ“ ì •ë‹µì…ë‹ˆë‹¤!</div>';
                } else {
                    const correctText = problem.options
                        .filter(opt => problem.correctKeys.includes(opt.key))
                        .map(opt => opt.text)
                        .join('<br>â€¢ ');
                    resultDiv.innerHTML = `<div class="result incorrect">âœ— í‹€ë ¸ìŠµë‹ˆë‹¤.<br><br>ì •ë‹µ:<br>â€¢ ${correctText}</div>`;
                }
            } else if (problem.type === 'order') {
                if (selectedOrder.length !== 3) {
                    resultDiv.innerHTML = '<div class="result incorrect">3ê°œë¥¼ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”!</div>';
                    return;
                }
                isCorrect = selectedOrder.every((val, idx) => val === correctAnswer[idx]);
                
                if (isCorrect) {
                    resultDiv.innerHTML = '<div class="result correct">âœ“ ì •ë‹µì…ë‹ˆë‹¤!</div>';
                } else {
                    resultDiv.innerHTML = `<div class="result incorrect">âœ— í‹€ë ¸ìŠµë‹ˆë‹¤.<br>ì •ë‹µ: ${correctAnswer.join(' > ')}</div>`;
                }
            } else if (problem.type === 'calculate') {
                const input = document.getElementById('userInput');
                if (!input.value) {
                    resultDiv.innerHTML = '<div class="result incorrect">ë‹µì„ ì…ë ¥í•´ì£¼ì„¸ìš”!</div>';
                    return;
                }
                const userValue = parseFloat(input.value);
                isCorrect = Math.abs(userValue - correctAnswer) < 0.1;
                
                if (isCorrect) {
                    resultDiv.innerHTML = '<div class="result correct">âœ“ ì •ë‹µì…ë‹ˆë‹¤!</div>';
                } else {
                    resultDiv.innerHTML = `<div class="result incorrect">âœ— í‹€ë ¸ìŠµë‹ˆë‹¤.<br>ì •ë‹µ: ${correctAnswer} ${problem.unit}</div>`;
                }
            }
        }

        init();
    </script>
</body>
</html>