<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—ë„ˆì§€ íš¨ìœ¨ ì‹œë®¬ë ˆì´ì…˜</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 500px;
            width: 100%;
            padding: 30px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 25px;
        }
        
        .header h1 {
            color: #667eea;
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .header p {
            color: #666;
            font-size: 14px;
        }
        
        .question-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            border-left: 5px solid #667eea;
        }
        
        .question-text {
            font-size: 16px;
            line-height: 1.6;
            color: #333;
            margin-bottom: 15px;
        }
        
        .data-box {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-family: monospace;
        }
        
        .data-box div {
            margin: 5px 0;
            font-size: 14px;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .option {
            background: white;
            border: 2px solid #e0e0e0;
            padding: 15px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 15px;
        }
        
        .option:hover {
            border-color: #667eea;
            transform: translateX(5px);
        }
        
        .option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .option.correct {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
        }
        
        .option.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }
        
        .buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        button {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-check {
            background: #667eea;
            color: white;
        }
        
        .btn-check:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }
        
        .btn-new {
            background: #4caf50;
            color: white;
        }
        
        .btn-new:hover {
            background: #45a049;
            transform: translateY(-2px);
        }
        
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            font-weight: bold;
            display: none;
        }
        
        .feedback.show {
            display: block;
        }
        
        .feedback.correct {
            background: #e8f5e9;
            color: #2e7d32;
            border: 2px solid #4caf50;
        }
        
        .feedback.incorrect {
            background: #ffebee;
            color: #c62828;
            border: 2px solid #f44336;
        }
        
        .solution {
            margin-top: 20px;
            padding: 20px;
            background: #f0f7ff;
            border-radius: 12px;
            border-left: 4px solid #2196f3;
            display: none;
        }
        
        .solution.show {
            display: block;
        }
        
        .solution-title {
            font-size: 18px;
            font-weight: bold;
            color: #1976d2;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
        }
        
        .solution-title::before {
            content: "ğŸ“";
            margin-right: 8px;
        }
        
        .solution-step {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 8px;
            line-height: 1.6;
        }
        
        .solution-step strong {
            color: #1976d2;
        }
        
        .solution-formula {
            background: #e3f2fd;
            padding: 8px 12px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            margin: 8px 0;
            display: inline-block;
        }
        
        .solution-answer {
            margin-top: 12px;
            padding: 12px;
            background: #e8f5e9;
            border-radius: 8px;
            font-weight: bold;
            color: #2e7d32;
            font-size: 16px;
        }
        
        .concept {
            margin-top: 20px;
            padding: 20px;
            background: #fff8e1;
            border-radius: 12px;
            border-left: 4px solid #ffa726;
            display: none;
        }
        
        .concept.show {
            display: block;
        }
        
        .concept-title {
            font-size: 18px;
            font-weight: bold;
            color: #f57c00;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
        }
        
        .concept-title::before {
            content: "ğŸ’¡";
            margin-right: 8px;
        }
        
        .concept-content {
            line-height: 1.8;
            color: #555;
        }
        
        .concept-point {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 8px;
            border-left: 3px solid #ffa726;
        }
        
        .concept-highlight {
            background: #ffe0b2;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
            color: #e65100;
        }
        
        .score {
            text-align: center;
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 12px;
        }
        
        .score-text {
            font-size: 18px;
            color: #667eea;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>âš¡ ì—ë„ˆì§€ íš¨ìœ¨ ì‹œë®¬ë ˆì´ì…˜</h1>
            <p>2022 ê°œì • êµìœ¡ê³¼ì • í†µí•©ê³¼í•™2</p>
        </div>
        
        <div class="question-box">
            <div class="question-text" id="questionText"></div>
            <div class="data-box" id="dataBox"></div>
        </div>
        
        <div class="options" id="optionsContainer"></div>
        
        <div class="buttons">
            <button class="btn-check" id="checkBtn" onclick="checkAnswer()">ì •ë‹µ í™•ì¸</button>
            <button class="btn-new" onclick="generateNewQuestion()">ìƒˆ ë¬¸ì œ</button>
        </div>
        
        <div class="feedback" id="feedback"></div>
        
        <div class="solution" id="solution"></div>
        
        <div class="concept" id="concept"></div>
        
        <div class="score">
            <div class="score-text">ì •ë‹µ: <span id="correct">0</span> / ì‹œë„: <span id="total">0</span></div>
        </div>
    </div>

    <script>
        let currentQuestion = {};
        let selectedOption = null;
        let answered = false;
        let correctCount = 0;
        let totalCount = 0;

        const questionTypes = [
            {
                type: 'heater',
                generate: () => {
                    const power = [1000, 1200, 1500, 1800, 2000][Math.floor(Math.random() * 5)];
                    const time = [1, 2, 3, 4, 5][Math.floor(Math.random() * 5)];
                    const cost = [100, 120, 150][Math.floor(Math.random() * 3)];
                    
                    const energy = (power * time) / 1000; // kWh
                    const totalCost = energy * cost;
                    
                    return {
                        question: `ì „ê¸°íˆí„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‚œë°©ì„ í•˜ê³  ìˆë‹¤. ë‹¤ìŒ ì¡°ê±´ì—ì„œ ì „ê¸° ìš”ê¸ˆì„ ê³„ì‚°í•˜ì‹œì˜¤.`,
                        data: `â€¢ ì „ê¸°íˆí„° ì†Œë¹„ì „ë ¥: ${power} W\nâ€¢ ì‚¬ìš© ì‹œê°„: ${time}ì‹œê°„\nâ€¢ ì „ê¸° ìš”ê¸ˆ: ${cost}ì›/kWh`,
                        answer: Math.round(totalCost),
                        unit: 'ì›',
                        solution: [
                            `<strong>1ë‹¨ê³„:</strong> ì†Œë¹„ ì „ë ¥ëŸ‰ ê³„ì‚° (kWh ë‹¨ìœ„ë¡œ ë³€í™˜)`,
                            `<div class="solution-formula">ì†Œë¹„ ì „ë ¥ëŸ‰ = ${power}W Ã— ${time}ì‹œê°„ Ã· 1000 = ${energy} kWh</div>`,
                            `<strong>2ë‹¨ê³„:</strong> ì „ê¸° ìš”ê¸ˆ ê³„ì‚°`,
                            `<div class="solution-formula">ì „ê¸° ìš”ê¸ˆ = ${energy} kWh Ã— ${cost}ì›/kWh = ${Math.round(totalCost)}ì›</div>`,
                            `<div class="solution-answer">âˆ´ ë‹µ: ${Math.round(totalCost)}ì›</div>`
                        ],
                        concept: {
                            title: 'ì „ë ¥ëŸ‰ê³¼ ì „ê¸° ìš”ê¸ˆ',
                            content: [
                                `<div class="concept-point"><span class="concept-highlight">ì „ë ¥ëŸ‰(kWh)</span>ì€ ì „ë ¥(W)ê³¼ ì‹œê°„(h)ì„ ê³±í•œ ê°’ì…ë‹ˆë‹¤. 1kWh = 1000Whì…ë‹ˆë‹¤.</div>`,
                                `<div class="concept-point"><span class="concept-highlight">ì „ê¸° ìš”ê¸ˆ</span>ì€ ì†Œë¹„í•œ ì „ë ¥ëŸ‰(kWh)ì— ë‹¨ê°€(ì›/kWh)ë¥¼ ê³±í•´ì„œ ê³„ì‚°í•©ë‹ˆë‹¤.</div>`,
                                `<div class="concept-point">ğŸ’¡ <strong>ì ˆì•½ íŒ:</strong> ì „ë ¥ì´ ë†’ì€ ê¸°ê¸°ì¼ìˆ˜ë¡ ì‚¬ìš© ì‹œê°„ì„ ì¤„ì´ë©´ ì „ê¸° ìš”ê¸ˆ ì ˆê° íš¨ê³¼ê°€ í½ë‹ˆë‹¤.</div>`
                            ]
                        },
                        generateOptions: (ans) => {
                            const opts = [
                                ans,
                                Math.round(ans * 0.8),
                                Math.round(ans * 1.2),
                                Math.round(ans * 0.6),
                                Math.round(ans * 1.5)
                            ];
                            return shuffle(opts).map(v => v + 'ì›');
                        }
                    };
                }
            },
            {
                type: 'efficiency',
                generate: () => {
                    const input = [1000, 1500, 2000, 2500][Math.floor(Math.random() * 4)];
                    const effPercent = [70, 75, 80, 85, 90][Math.floor(Math.random() * 5)];
                    
                    const output = input * effPercent / 100;
                    
                    return {
                        question: `ì–´ë–¤ ì „ê¸° ê¸°êµ¬ì˜ ì—ë„ˆì§€ íš¨ìœ¨ì„ ê³„ì‚°í•˜ì‹œì˜¤.`,
                        data: `â€¢ ì…ë ¥ ì—ë„ˆì§€: ${input} J\nâ€¢ ì—ë„ˆì§€ íš¨ìœ¨: ${effPercent}%`,
                        answer: output,
                        unit: 'J',
                        solution: [
                            `<strong>1ë‹¨ê³„:</strong> ì¶œë ¥ ì—ë„ˆì§€ ê³„ì‚°`,
                            `<div class="solution-formula">ì¶œë ¥ ì—ë„ˆì§€ = ì…ë ¥ ì—ë„ˆì§€ Ã— íš¨ìœ¨</div>`,
                            `<div class="solution-formula">ì¶œë ¥ ì—ë„ˆì§€ = ${input}J Ã— ${effPercent}% = ${input}J Ã— ${effPercent/100} = ${output}J</div>`,
                            `<div class="solution-answer">âˆ´ ë‹µ: ${output} J</div>`
                        ],
                        concept: {
                            title: 'ì—ë„ˆì§€ íš¨ìœ¨',
                            content: [
                                `<div class="concept-point"><span class="concept-highlight">ì—ë„ˆì§€ íš¨ìœ¨</span> = (ì¶œë ¥ ì—ë„ˆì§€ Ã· ì…ë ¥ ì—ë„ˆì§€) Ã— 100%</div>`,
                                `<div class="concept-point">ëª¨ë“  ì—ë„ˆì§€ ë³€í™˜ ê³¼ì •ì—ì„œëŠ” ì—´, ì†Œë¦¬ ë“±ìœ¼ë¡œ <span class="concept-highlight">ì—ë„ˆì§€ ì†ì‹¤</span>ì´ ë°œìƒí•©ë‹ˆë‹¤.</div>`,
                                `<div class="concept-point">ğŸ’¡ íš¨ìœ¨ì´ ë†’ì„ìˆ˜ë¡ ì—ë„ˆì§€ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë¯€ë¡œ ê²½ì œì ì´ê³  í™˜ê²½ì¹œí™”ì ì…ë‹ˆë‹¤.</div>`
                            ]
                        },
                        generateOptions: (ans) => {
                            const opts = [
                                ans,
                                Math.round(ans * 0.9),
                                Math.round(ans * 1.1),
                                Math.round(ans * 0.8),
                                Math.round(ans * 1.2)
                            ];
                            return shuffle(opts).map(v => v + ' J');
                        }
                    };
                }
            },
            {
                type: 'led_comparison',
                generate: () => {
                    const ledPower = [8, 10, 12][Math.floor(Math.random() * 3)];
                    const incanPower = ledPower * 6; // ë°±ì—´ë“±ì€ ì•½ 6ë°°
                    const hours = [5, 8, 10][Math.floor(Math.random() * 3)];
                    const days = 30;
                    const cost = 150;
                    
                    const ledCost = (ledPower * hours * days * cost) / 1000;
                    const incanCost = (incanPower * hours * days * cost) / 1000;
                    const savings = Math.round(incanCost - ledCost);
                    
                    return {
                        question: `LED ì „êµ¬ì™€ ë°±ì—´ë“±ì˜ í•œ ë‹¬ ì „ê¸° ìš”ê¸ˆ ì°¨ì´ë¥¼ ê³„ì‚°í•˜ì‹œì˜¤.`,
                        data: `â€¢ LED ì „êµ¬: ${ledPower}W, ë°±ì—´ë“±: ${incanPower}W\nâ€¢ í•˜ë£¨ ì‚¬ìš© ì‹œê°„: ${hours}ì‹œê°„\nâ€¢ í•œ ë‹¬ ì‚¬ìš©: ${days}ì¼\nâ€¢ ì „ê¸° ìš”ê¸ˆ: ${cost}ì›/kWh`,
                        answer: savings,
                        unit: 'ì›',
                        solution: [
                            `<strong>1ë‹¨ê³„:</strong> LED ì „êµ¬ í•œ ë‹¬ ì „ê¸° ìš”ê¸ˆ`,
                            `<div class="solution-formula">LED ìš”ê¸ˆ = ${ledPower}W Ã— ${hours}h Ã— ${days}ì¼ Ã— ${cost}ì›/kWh Ã· 1000 = ${Math.round(ledCost)}ì›</div>`,
                            `<strong>2ë‹¨ê³„:</strong> ë°±ì—´ë“± í•œ ë‹¬ ì „ê¸° ìš”ê¸ˆ`,
                            `<div class="solution-formula">ë°±ì—´ë“± ìš”ê¸ˆ = ${incanPower}W Ã— ${hours}h Ã— ${days}ì¼ Ã— ${cost}ì›/kWh Ã· 1000 = ${Math.round(incanCost)}ì›</div>`,
                            `<strong>3ë‹¨ê³„:</strong> ìš”ê¸ˆ ì°¨ì´ ê³„ì‚°`,
                            `<div class="solution-formula">ì ˆê°ì•¡ = ${Math.round(incanCost)}ì› - ${Math.round(ledCost)}ì› = ${savings}ì›</div>`,
                            `<div class="solution-answer">âˆ´ ë‹µ: ${savings}ì›</div>`
                        ],
                        concept: {
                            title: 'LEDì™€ ë°±ì—´ë“±ì˜ ì—ë„ˆì§€ íš¨ìœ¨',
                            content: [
                                `<div class="concept-point"><span class="concept-highlight">LED ì „êµ¬</span>ëŠ” ë°±ì—´ë“±ì— ë¹„í•´ ê°™ì€ ë°ê¸°ë¥¼ ë‚´ë©´ì„œë„ ì „ë ¥ ì†Œë¹„ê°€ ì•½ 1/6 ìˆ˜ì¤€ì…ë‹ˆë‹¤.</div>`,
                                `<div class="concept-point"><span class="concept-highlight">ë°±ì—´ë“±</span>ì€ ì „ê¸° ì—ë„ˆì§€ì˜ ëŒ€ë¶€ë¶„ì„ ì—´ë¡œ ë°©ì¶œí•˜ì—¬ íš¨ìœ¨ì´ ë‚®ìŠµë‹ˆë‹¤ (ì•½ 5%).</div>`,
                                `<div class="concept-point">ğŸ’¡ LEDëŠ” ì´ˆê¸° ë¹„ìš©ì´ ë†’ì§€ë§Œ ì¥ê¸°ì ìœ¼ë¡œ ì „ê¸° ìš”ê¸ˆ ì ˆê°ê³¼ ê¸´ ìˆ˜ëª…ìœ¼ë¡œ ê²½ì œì ì…ë‹ˆë‹¤.</div>`
                            ]
                        },
                        generateOptions: (ans) => {
                            const opts = [
                                ans,
                                Math.round(ans * 0.85),
                                Math.round(ans * 1.15),
                                Math.round(ans * 0.7),
                                Math.round(ans * 1.3)
                            ];
                            return shuffle(opts).map(v => v + 'ì›');
                        }
                    };
                }
            },
            {
                type: 'solar_panel',
                generate: () => {
                    const area = [10, 15, 20, 25][Math.floor(Math.random() * 4)];
                    const efficiency = [15, 18, 20][Math.floor(Math.random() * 3)];
                    const sunlight = [1000, 1200][Math.floor(Math.random() * 2)];
                    
                    const output = area * sunlight * efficiency / 100;
                    
                    return {
                        question: `íƒœì–‘ê´‘ íŒ¨ë„ì˜ ì¶œë ¥ ì „ë ¥ì„ ê³„ì‚°í•˜ì‹œì˜¤.`,
                        data: `â€¢ íŒ¨ë„ ë©´ì : ${area} mÂ²\nâ€¢ ë³€í™˜ íš¨ìœ¨: ${efficiency}%\nâ€¢ íƒœì–‘ ë³µì‚¬ ì—ë„ˆì§€: ${sunlight} W/mÂ²`,
                        answer: Math.round(output),
                        unit: 'W',
                        solution: [
                            `<strong>1ë‹¨ê³„:</strong> ì…ì‚¬ íƒœì–‘ ì—ë„ˆì§€ ê³„ì‚°`,
                            `<div class="solution-formula">ì…ì‚¬ ì—ë„ˆì§€ = ${area}mÂ² Ã— ${sunlight}W/mÂ² = ${area * sunlight}W</div>`,
                            `<strong>2ë‹¨ê³„:</strong> ì¶œë ¥ ì „ë ¥ ê³„ì‚°`,
                            `<div class="solution-formula">ì¶œë ¥ ì „ë ¥ = ${area * sunlight}W Ã— ${efficiency}% = ${area * sunlight}W Ã— ${efficiency/100} = ${Math.round(output)}W</div>`,
                            `<div class="solution-answer">âˆ´ ë‹µ: ${Math.round(output)} W</div>`
                        ],
                        concept: {
                            title: 'íƒœì–‘ê´‘ ë°œì „ì˜ ì›ë¦¬',
                            content: [
                                `<div class="concept-point"><span class="concept-highlight">íƒœì–‘ê´‘ íŒ¨ë„</span>ì€ íƒœì–‘ ì—ë„ˆì§€ë¥¼ ì „ê¸° ì—ë„ˆì§€ë¡œ ë³€í™˜í•˜ëŠ” ê´‘ì „ íš¨ê³¼ë¥¼ ì´ìš©í•©ë‹ˆë‹¤.</div>`,
                                `<div class="concept-point">í˜„ì¬ ìƒìš© íƒœì–‘ê´‘ íŒ¨ë„ì˜ <span class="concept-highlight">ë³€í™˜ íš¨ìœ¨</span>ì€ ì•½ 15~22% ìˆ˜ì¤€ì…ë‹ˆë‹¤.</div>`,
                                `<div class="concept-point">ğŸ’¡ íƒœì–‘ê´‘ ë°œì „ì€ ì¬ìƒ ê°€ëŠ¥í•œ ì²­ì • ì—ë„ˆì§€ì›ìœ¼ë¡œ ì˜¨ì‹¤ê°€ìŠ¤ ë°°ì¶œì´ ì—†ìŠµë‹ˆë‹¤.</div>`
                            ]
                        },
                        generateOptions: (ans) => {
                            const opts = [
                                ans,
                                Math.round(ans * 0.9),
                                Math.round(ans * 1.1),
                                Math.round(ans * 0.75),
                                Math.round(ans * 1.25)
                            ];
                            return shuffle(opts).map(v => v + ' W');
                        }
                    };
                }
            },
            {
                type: 'refrigerator',
                generate: () => {
                    const monthlyKwh = [30, 35, 40, 45][Math.floor(Math.random() * 4)];
                    const cost = [120, 150][Math.floor(Math.random() * 2)];
                    const months = 12;
                    
                    const yearCost = monthlyKwh * cost * months;
                    
                    return {
                        question: `ëƒ‰ì¥ê³ ì˜ ì—°ê°„ ì „ê¸° ìš”ê¸ˆì„ ê³„ì‚°í•˜ì‹œì˜¤.`,
                        data: `â€¢ ì›” í‰ê·  ì†Œë¹„ ì „ë ¥: ${monthlyKwh} kWh\nâ€¢ ì „ê¸° ìš”ê¸ˆ: ${cost}ì›/kWh`,
                        answer: yearCost,
                        unit: 'ì›',
                        solution: [
                            `<strong>1ë‹¨ê³„:</strong> ì—°ê°„ ì†Œë¹„ ì „ë ¥ëŸ‰ ê³„ì‚°`,
                            `<div class="solution-formula">ì—°ê°„ ì†Œë¹„ëŸ‰ = ${monthlyKwh}kWh/ì›” Ã— 12ê°œì›” = ${monthlyKwh * 12}kWh</div>`,
                            `<strong>2ë‹¨ê³„:</strong> ì—°ê°„ ì „ê¸° ìš”ê¸ˆ ê³„ì‚°`,
                            `<div class="solution-formula">ì—°ê°„ ìš”ê¸ˆ = ${monthlyKwh * 12}kWh Ã— ${cost}ì›/kWh = ${yearCost.toLocaleString()}ì›</div>`,
                            `<div class="solution-answer">âˆ´ ë‹µ: ${yearCost.toLocaleString()}ì›</div>`
                        ],
                        concept: {
                            title: 'ëƒ‰ì¥ê³  ì—ë„ˆì§€ ì ˆì•½',
                            content: [
                                `<div class="concept-point">ëƒ‰ì¥ê³ ëŠ” 24ì‹œê°„ ê°€ë™ë˜ë¯€ë¡œ <span class="concept-highlight">ì—ë„ˆì§€ ë“±ê¸‰</span>ì´ ë†’ì€ ì œí’ˆì„ ì„ íƒí•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.</div>`,
                                `<div class="concept-point">ë¬¸ì„ ìì£¼ ì—¬ë‹«ê±°ë‚˜ ëœ¨ê±°ìš´ ìŒì‹ì„ ë„£ìœ¼ë©´ ì „ë ¥ ì†Œë¹„ê°€ ì¦ê°€í•©ë‹ˆë‹¤.</div>`,
                                `<div class="concept-point">ğŸ’¡ ëƒ‰ì¥ê³  ì˜¨ë„ëŠ” 3~5â„ƒ, ëƒ‰ë™ì‹¤ì€ -18â„ƒê°€ ì ì • ì˜¨ë„ì…ë‹ˆë‹¤.</div>`
                            ]
                        },
                        generateOptions: (ans) => {
                            const opts = [
                                ans,
                                Math.round(ans * 0.85),
                                Math.round(ans * 1.15),
                                Math.round(ans * 0.7),
                                Math.round(ans * 1.3)
                            ];
                            return shuffle(opts).map(v => v.toLocaleString() + 'ì›');
                        }
                    };
                }
            },
            {
                type: 'insulation',
                generate: () => {
                    const beforeCost = [150000, 180000, 200000][Math.floor(Math.random() * 3)];
                    const reduction = [20, 25, 30][Math.floor(Math.random() * 3)];
                    
                    const savings = beforeCost * reduction / 100;
                    
                    return {
                        question: `ë‹¨ì—´ì¬ ì‹œê³µ í›„ ì ˆê°ë˜ëŠ” ì—°ê°„ ë‚œë°©ë¹„ë¥¼ ê³„ì‚°í•˜ì‹œì˜¤.`,
                        data: `â€¢ ì‹œê³µ ì „ ì—°ê°„ ë‚œë°©ë¹„: ${beforeCost.toLocaleString()}ì›\nâ€¢ ì—ë„ˆì§€ ì ˆê°ë¥ : ${reduction}%`,
                        answer: savings,
                        unit: 'ì›',
                        solution: [
                            `<strong>1ë‹¨ê³„:</strong> ì ˆê°ë˜ëŠ” ë‚œë°©ë¹„ ê³„ì‚°`,
                            `<div class="solution-formula">ì ˆê°ì•¡ = ${beforeCost.toLocaleString()}ì› Ã— ${reduction}%</div>`,
                            `<div class="solution-formula">ì ˆê°ì•¡ = ${beforeCost.toLocaleString()}ì› Ã— ${reduction/100} = ${savings.toLocaleString()}ì›</div>`,
                            `<div class="solution-answer">âˆ´ ë‹µ: ${savings.toLocaleString()}ì›</div>`
                        ],
                        concept: {
                            title: 'ê±´ë¬¼ ë‹¨ì—´ê³¼ ì—ë„ˆì§€ ì ˆì•½',
                            content: [
                                `<div class="concept-point"><span class="concept-highlight">ë‹¨ì—´ì¬</span>ëŠ” ì—´ì „ë„ìœ¨ì´ ë‚®ì€ ë¬¼ì§ˆë¡œ ì—´ì˜ ì´ë™ì„ ì°¨ë‹¨í•©ë‹ˆë‹¤.</div>`,
                                `<div class="concept-point">ì ì ˆí•œ ë‹¨ì—´ì€ ê²¨ìš¸ì—ëŠ” ë‚œë°©ë¹„, ì—¬ë¦„ì—ëŠ” ëƒ‰ë°©ë¹„ë¥¼ ëª¨ë‘ ì ˆê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>`,
                                `<div class="concept-point">ğŸ’¡ ì°½ë¬¸ ë‹¨ì—´ì´ íŠ¹íˆ ì¤‘ìš”í•˜ë©°, ë³µì¸µ ìœ ë¦¬ë‚˜ ë‹¨ì—´ í•„ë¦„ì´ íš¨ê³¼ì ì…ë‹ˆë‹¤.</div>`
                            ]
                        },
                        generateOptions: (ans) => {
                            const opts = [
                                ans,
                                Math.round(ans * 0.8),
                                Math.round(ans * 1.2),
                                Math.round(ans * 0.6),
                                Math.round(ans * 1.4)
                            ];
                            return shuffle(opts).map(v => v.toLocaleString() + 'ì›');
                        }
                    };
                }
            },
            {
                type: 'ac_efficiency',
                generate: () => {
                    const cooling = [3.5, 4.0, 4.5, 5.0][Math.floor(Math.random() * 4)];
                    const power = [1.0, 1.2, 1.5][Math.floor(Math.random() * 3)];
                    
                    const eer = cooling / power;
                    
                    return {
                        question: `ì—ì–´ì»¨ì˜ ì—ë„ˆì§€ íš¨ìœ¨ ë¹„ìœ¨(EER)ì„ ê³„ì‚°í•˜ì‹œì˜¤.`,
                        data: `â€¢ ëƒ‰ë°© ëŠ¥ë ¥: ${cooling} kW\nâ€¢ ì†Œë¹„ ì „ë ¥: ${power} kW`,
                        answer: parseFloat(eer.toFixed(2)),
                        unit: '',
                        solution: [
                            `<strong>1ë‹¨ê³„:</strong> EER ê³µì‹ ì ìš©`,
                            `<div class="solution-formula">EER = ëƒ‰ë°© ëŠ¥ë ¥ Ã· ì†Œë¹„ ì „ë ¥</div>`,
                            `<div class="solution-formula">EER = ${cooling}kW Ã· ${power}kW = ${eer.toFixed(2)}</div>`,
                            `<div class="solution-answer">âˆ´ ë‹µ: ${eer.toFixed(2)}</div>`
                        ],
                        concept: {
                            title: 'EER (ì—ë„ˆì§€ íš¨ìœ¨ ë¹„ìœ¨)',
                            content: [
                                `<div class="concept-point"><span class="concept-highlight">EER</span>ì€ ì—ì–´ì»¨ì´ 1kWì˜ ì „ë ¥ì„ ì†Œë¹„í•  ë•Œ ì œê±°í•  ìˆ˜ ìˆëŠ” ì—´ëŸ‰(kW)ì…ë‹ˆë‹¤.</div>`,
                                `<div class="concept-point">EER ê°’ì´ í´ìˆ˜ë¡ ê°™ì€ ì „ë ¥ìœ¼ë¡œ ë” ë§ì€ ëƒ‰ë°© íš¨ê³¼ë¥¼ ë‚¼ ìˆ˜ ìˆì–´ íš¨ìœ¨ì ì…ë‹ˆë‹¤.</div>`,
                                `<div class="concept-point">ğŸ’¡ ì¼ë°˜ì ìœ¼ë¡œ EER 3.0 ì´ìƒì´ë©´ ê³ íš¨ìœ¨ ì œí’ˆìœ¼ë¡œ ë¶„ë¥˜ë©ë‹ˆë‹¤.</div>`
                            ]
                        },
                        generateOptions: (ans) => {
                            const opts = [
                                ans,
                                parseFloat((ans * 0.9).toFixed(2)),
                                parseFloat((ans * 1.1).toFixed(2)),
                                parseFloat((ans * 0.8).toFixed(2)),
                                parseFloat((ans * 1.2).toFixed(2))
                            ];
                            return shuffle(opts);
                        }
                    };
                }
            },
            {
                type: 'standby_power',
                generate: () => {
                    const devices = [3, 4, 5][Math.floor(Math.random() * 3)];
                    const standbyPower = [5, 8, 10][Math.floor(Math.random() * 3)];
                    const hours = 24;
                    const days = 365;
                    const cost = 150;
                    
                    const totalPower = devices * standbyPower;
                    const yearCost = (totalPower * hours * days * cost) / 1000;
                    
                    return {
                        question: `ëŒ€ê¸°ì „ë ¥ìœ¼ë¡œ ì¸í•œ ì—°ê°„ ì „ê¸° ìš”ê¸ˆì„ ê³„ì‚°í•˜ì‹œì˜¤.`,
                        data: `â€¢ ëŒ€ê¸°ì „ë ¥ ê¸°ê¸° ìˆ˜: ${devices}ê°œ\nâ€¢ ê°œë‹¹ ëŒ€ê¸°ì „ë ¥: ${standbyPower}W\nâ€¢ ì „ê¸° ìš”ê¸ˆ: ${cost}ì›/kWh`,
                        answer: Math.round(yearCost),
                        unit: 'ì›',
                        solution: [
                            `<strong>1ë‹¨ê³„:</strong> ì´ ëŒ€ê¸°ì „ë ¥ ê³„ì‚°`,
                            `<div class="solution-formula">ì´ ëŒ€ê¸°ì „ë ¥ = ${devices}ê°œ Ã— ${standbyPower}W = ${totalPower}W</div>`,
                            `<strong>2ë‹¨ê³„:</strong> ì—°ê°„ ì†Œë¹„ ì „ë ¥ëŸ‰ ê³„ì‚°`,
                            `<div class="solution-formula">ì—°ê°„ ì†Œë¹„ëŸ‰ = ${totalPower}W Ã— 24ì‹œê°„ Ã— 365ì¼ Ã· 1000 = ${((totalPower * 24 * 365) / 1000).toFixed(1)}kWh</div>`,
                            `<strong>3ë‹¨ê³„:</strong> ì—°ê°„ ì „ê¸° ìš”ê¸ˆ ê³„ì‚°`,
                            `<div class="solution-formula">ì—°ê°„ ìš”ê¸ˆ = ${((totalPower * 24 * 365) / 1000).toFixed(1)}kWh Ã— ${cost}ì›/kWh = ${Math.round(yearCost).toLocaleString()}ì›</div>`,
                            `<div class="solution-answer">âˆ´ ë‹µ: ${Math.round(yearCost).toLocaleString()}ì›</div>`
                        ],
                        concept: {
                            title: 'ëŒ€ê¸°ì „ë ¥ê³¼ ì—ë„ˆì§€ ë‚­ë¹„',
                            content: [
                                `<div class="concept-point"><span class="concept-highlight">ëŒ€ê¸°ì „ë ¥</span>ì€ ì „ìì œí’ˆì´ êº¼ì§„ ìƒíƒœì—ì„œë„ ì†Œë¹„í•˜ëŠ” ì „ë ¥ì…ë‹ˆë‹¤.</div>`,
                                `<div class="concept-point">TV, ì…‹í†±ë°•ìŠ¤, ì»´í“¨í„°, ì¶©ì „ê¸° ë“±ì´ ëŒ€í‘œì ì¸ ëŒ€ê¸°ì „ë ¥ ì†Œë¹„ ê¸°ê¸°ì…ë‹ˆë‹¤.</div>`,
                                `<div class="concept-point">ğŸ’¡ ë©€í‹°íƒ­ì„ ì‚¬ìš©í•´ ì™„ì „íˆ ì „ì›ì„ ì°¨ë‹¨í•˜ë©´ ëŒ€ê¸°ì „ë ¥ì„ ì ˆì•½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>`
                            ]
                        },
                        generateOptions: (ans) => {
                            const opts = [
                                ans,
                                Math.round(ans * 0.85),
                                Math.round(ans * 1.15),
                                Math.round(ans * 0.7),
                                Math.round(ans * 1.3)
                            ];
                            return shuffle(opts).map(v => v.toLocaleString() + 'ì›');
                        }
                    };
                }
            },
            {
                type: 'heat_pump',
                generate: () => {
                    const heatOut = [10, 12, 15][Math.floor(Math.random() * 3)];
                    const workIn = [3, 4, 5][Math.floor(Math.random() * 3)];
                    
                    const cop = heatOut / workIn;
                    
                    return {
                        question: `íˆíŠ¸íŒí”„ì˜ ì„±ëŠ¥ê³„ìˆ˜(COP)ë¥¼ ê³„ì‚°í•˜ì‹œì˜¤.`,
                        data: `â€¢ ê³µê¸‰ ì—´ëŸ‰: ${heatOut} kW\nâ€¢ ì†Œë¹„ ì „ë ¥: ${workIn} kW`,
                        answer: parseFloat(cop.toFixed(2)),
                        unit: '',
                        solution: [
                            `<strong>1ë‹¨ê³„:</strong> COP ê³µì‹ ì ìš©`,
                            `<div class="solution-formula">COP = ê³µê¸‰ ì—´ëŸ‰ Ã· ì†Œë¹„ ì „ë ¥</div>`,
                            `<div class="solution-formula">COP = ${heatOut}kW Ã· ${workIn}kW = ${cop.toFixed(2)}</div>`,
                            `<div class="solution-answer">âˆ´ ë‹µ: ${cop.toFixed(2)}</div>`
                        ],
                        concept: {
                            title: 'COP (ì„±ëŠ¥ê³„ìˆ˜)ì™€ íˆíŠ¸íŒí”„',
                            content: [
                                `<div class="concept-point"><span class="concept-highlight">COP</span>ëŠ” íˆíŠ¸íŒí”„ê°€ 1kWì˜ ì „ë ¥ìœ¼ë¡œ ê³µê¸‰í•  ìˆ˜ ìˆëŠ” ì—´ëŸ‰(kW)ì…ë‹ˆë‹¤.</div>`,
                                `<div class="concept-point">íˆíŠ¸íŒí”„ëŠ” ì™¸ë¶€ ì—´ì„ ì´ë™ì‹œì¼œ ë‚œë°©í•˜ë¯€ë¡œ ì „ê¸°íˆí„°ë³´ë‹¤ íš¨ìœ¨ì´ 3~4ë°° ë†’ìŠµë‹ˆë‹¤.</div>`,
                                `<div class="concept-point">ğŸ’¡ COPê°€ 3ì´ë©´ 1ì˜ ì „ë ¥ìœ¼ë¡œ 3ì˜ ì—´ëŸ‰ì„ ê³µê¸‰í•˜ì—¬ ì—ë„ˆì§€ íš¨ìœ¨ì´ 300%ì…ë‹ˆë‹¤.</div>`
                            ]
                        },
                        generateOptions: (ans) => {
                            const opts = [
                                ans,
                                parseFloat((ans * 0.9).toFixed(2)),
                                parseFloat((ans * 1.1).toFixed(2)),
                                parseFloat((ans * 0.8).toFixed(2)),
                                parseFloat((ans * 1.2).toFixed(2))
                            ];
                            return shuffle(opts);
                        }
                    };
                }
            },
            {
                type: 'energy_grade',
                generate: () => {
                    const beforeGrade = [400, 450, 500][Math.floor(Math.random() * 3)];
                    const afterGrade = [280, 300, 320][Math.floor(Math.random() * 3)];
                    const cost = 150;
                    
                    const savings = (beforeGrade - afterGrade) * cost;
                    
                    return {
                        question: `ê°€ì „ì œí’ˆ êµì²´ í›„ ì—°ê°„ ì ˆê°ë˜ëŠ” ì „ê¸° ìš”ê¸ˆì„ ê³„ì‚°í•˜ì‹œì˜¤.`,
                        data: `â€¢ ê¸°ì¡´ ì œí’ˆ ì—°ê°„ ì†Œë¹„: ${beforeGrade} kWh\nâ€¢ ì‹ ì œí’ˆ ì—°ê°„ ì†Œë¹„: ${afterGrade} kWh\nâ€¢ ì „ê¸° ìš”ê¸ˆ: ${cost}ì›/kWh`,
                        answer: savings,
                        unit: 'ì›',
                        solution: [
                            `<strong>1ë‹¨ê³„:</strong> ì ˆê°ë˜ëŠ” ì „ë ¥ëŸ‰ ê³„ì‚°`,
                            `<div class="solution-formula">ì ˆê° ì „ë ¥ëŸ‰ = ${beforeGrade}kWh - ${afterGrade}kWh = ${beforeGrade - afterGrade}kWh</div>`,
                            `<strong>2ë‹¨ê³„:</strong> ì ˆê° ìš”ê¸ˆ ê³„ì‚°`,
                            `<div class="solution-formula">ì ˆê° ìš”ê¸ˆ = ${beforeGrade - afterGrade}kWh Ã— ${cost}ì›/kWh = ${savings.toLocaleString()}ì›</div>`,
                            `<div class="solution-answer">âˆ´ ë‹µ: ${savings.toLocaleString()}ì›</div>`
                        ],
                        concept: {
                            title: 'ì—ë„ˆì§€ ë“±ê¸‰ê³¼ íš¨ìœ¨',
                            content: [
                                `<div class="concept-point"><span class="concept-highlight">ì—ë„ˆì§€ ì†Œë¹„íš¨ìœ¨ ë“±ê¸‰</span>ì€ 1~5ë“±ê¸‰ìœ¼ë¡œ ë‚˜ë‰˜ë©°, 1ë“±ê¸‰ì´ ê°€ì¥ íš¨ìœ¨ì ì…ë‹ˆë‹¤.</div>`,
                                `<div class="concept-point">ê³ íš¨ìœ¨ ì œí’ˆì€ ì´ˆê¸° ë¹„ìš©ì´ ë†’ì§€ë§Œ ì¥ê¸°ì ìœ¼ë¡œ ì „ê¸° ìš”ê¸ˆ ì ˆê° íš¨ê³¼ê°€ í½ë‹ˆë‹¤.</div>`,
                                `<div class="concept-point">ğŸ’¡ ëƒ‰ì¥ê³ , ì—ì–´ì»¨, TV ë“± ì¥ì‹œê°„ ì‚¬ìš©í•˜ëŠ” ì œí’ˆì¼ìˆ˜ë¡ ì—ë„ˆì§€ ë“±ê¸‰ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.</div>`
                            ]
                        },
                        generateOptions: (ans) => {
                            const opts = [
                                ans,
                                Math.round(ans * 0.85),
                                Math.round(ans * 1.15),
                                Math.round(ans * 0.7),
                                Math.round(ans * 1.3)
                            ];
                            return shuffle(opts).map(v => v.toLocaleString() + 'ì›');
                        }
                    };
                }
            }
        ];

        function shuffle(array) {
            const arr = [...array];
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }

        function generateNewQuestion() {
            const questionType = questionTypes[Math.floor(Math.random() * questionTypes.length)];
            currentQuestion = questionType.generate();
            
            document.getElementById('questionText').textContent = currentQuestion.question;
            document.getElementById('dataBox').textContent = currentQuestion.data;
            
            const options = currentQuestion.generateOptions(currentQuestion.answer);
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            options.forEach((option, index) => {
                const div = document.createElement('div');
                div.className = 'option';
                div.textContent = `${index + 1}. ${option}`;
                div.onclick = () => selectOption(index, div);
                optionsContainer.appendChild(div);
            });
            
            selectedOption = null;
            answered = false;
            document.getElementById('checkBtn').disabled = false;
            document.getElementById('feedback').classList.remove('show');
            document.getElementById('solution').classList.remove('show');
            document.getElementById('concept').classList.remove('show');
        }

        function selectOption(index, element) {
            if (answered) return;
            
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            element.classList.add('selected');
            selectedOption = index;
        }

        function checkAnswer() {
            if (selectedOption === null || answered) return;
            
            answered = true;
            totalCount++;
            
            // í˜„ì¬ ì„ íƒì§€ ë°°ì—´ì„ ì €ì¥
            const currentOptions = [...document.querySelectorAll('.option')].map(opt => 
                opt.textContent.substring(3).trim()
            );
            
            const correctValue = currentQuestion.answer + (currentQuestion.unit ? ' ' + currentQuestion.unit : '');
            const selectedValue = currentOptions[selectedOption];
            
            const allOptions = document.querySelectorAll('.option');
            let correctIndex = -1;
            
            // ì •ë‹µ ì„ íƒì§€ ì°¾ê¸°
            currentOptions.forEach((optText, idx) => {
                // ìˆ«ì ë¶€ë¶„ë§Œ ë¹„êµ (ë‹¨ìœ„ ì œê±° í›„)
                const optValue = optText.replace(/[^\d.]/g, '');
                const correctNumValue = currentQuestion.answer.toString().replace(/[^\d.]/g, '');
                
                if (optValue === correctNumValue) {
                    correctIndex = idx;
                    allOptions[idx].classList.add('correct');
                }
            });
            
            const isCorrect = (selectedOption === correctIndex);
            
            if (!isCorrect) {
                allOptions[selectedOption].classList.add('incorrect');
            }
            
            if (isCorrect) {
                correctCount++;
                document.getElementById('feedback').textContent = 'âœ“ ì •ë‹µì…ë‹ˆë‹¤!';
                document.getElementById('feedback').className = 'feedback correct show';
            } else {
                document.getElementById('feedback').textContent = 'âœ— í‹€ë ¸ìŠµë‹ˆë‹¤. ì •ë‹µ: ' + correctValue;
                document.getElementById('feedback').className = 'feedback incorrect show';
            }
            
            // í’€ì´ í‘œì‹œ
            const solutionDiv = document.getElementById('solution');
            solutionDiv.innerHTML = '<div class="solution-title">í’€ì´ ê³¼ì •</div>';
            currentQuestion.solution.forEach(step => {
                const stepDiv = document.createElement('div');
                stepDiv.className = 'solution-step';
                stepDiv.innerHTML = step;
                solutionDiv.appendChild(stepDiv);
            });
            solutionDiv.classList.add('show');
            
            // ê°œë… í‘œì‹œ
            const conceptDiv = document.getElementById('concept');
            conceptDiv.innerHTML = `<div class="concept-title">${currentQuestion.concept.title}</div>`;
            const contentWrapper = document.createElement('div');
            contentWrapper.className = 'concept-content';
            currentQuestion.concept.content.forEach(item => {
                contentWrapper.innerHTML += item;
            });
            conceptDiv.appendChild(contentWrapper);
            conceptDiv.classList.add('show');
            
            document.getElementById('correct').textContent = correctCount;
            document.getElementById('total').textContent = totalCount;
            document.getElementById('checkBtn').disabled = true;
        }

        // ì´ˆê¸° ë¬¸ì œ ìƒì„±
        generateNewQuestion();
    </script>
</body>
</html>